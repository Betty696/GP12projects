//=============================================================================
//
// イベント処理 [event.cpp]
// Author : 藤田高輔
//
//=============================================================================

/*******************************************************************************
* インクルードファイル
*******************************************************************************/
#include "main.h"
#include "game.h"
#include "weekloop.h"
#include "input.h"
#include "event.h"
#include "debugproc.h"

/******************************************************************************
* マクロ定義
******************************************************************************/

/******************************************************************************
* プロトタイプ宣言
******************************************************************************/

/******************************************************************************
* グローバル変数
******************************************************************************/
EVENT g_event;		//グローバル変数（複数作成必要なし)

/******************************************************************************
* 初期化処理
******************************************************************************/
void InitEvent(void)
{
	//ポインタ取得
	EVENT* event = GetEvent();

	event->com = CHOICES_NULL;
	event->com_timing = TIMING_NULL;
	event->page = 0;
	return;
}
/******************************************************************************
* 終了処理
******************************************************************************/
void UninitEvent(void)
{

}
/******************************************************************************
* 更新関数
******************************************************************************/
void UpdateEvent(void)
{
	//ポインタ取得
	EVENT* event = GetEvent();
	WEEKLOOP* weekloop = GetWeeekloop();

	//ページ送り
	if (GetKeyboardTrigger(DIK_SPACE))
	{
		event->page++;
	}
	//リザルトへの遷移
	if (event->page >= EVENT00_MAX)
	{
		weekloop->loopmood = WEEKLOOP_RESULT;
	}

	//デバッグ文字
#ifdef _DEBUG
	PrintDebugProc("スペースキー:すすむ　エンターキー:アクション\n");
#endif
}

/******************************************************************************
* 描画関数
******************************************************************************/
void DrawEvent(void)
{

}

/******************************************************************************
* 描画関数
******************************************************************************/
EVENT* GetEvent(void)
{
	return &g_event;
}

/******************************************************************************
* ページ数を返す関数
******************************************************************************/
int SetEventPage(void)
{
	//ポインタ取得
	EVENT* event = GetEvent();

	return event->page;
}